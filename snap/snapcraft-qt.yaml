name: gosh-fetch-qt
version: '2.0.0'
summary: Modern download manager for Linux (Qt)
description: |
  Gosh Fetch is a powerful and modern download manager for Linux with support
  for HTTP, HTTPS, and BitTorrent downloads. Built with Qt6 for a native
  KDE Plasma experience.

  Features:
  - HTTP/HTTPS downloads with resume support
  - BitTorrent and magnet link support
  - Download scheduling and queue management
  - System tray integration
  - Modern, adaptive UI

grade: stable
confinement: strict
base: core24
compression: lzo

platforms:
  amd64:
  arm64:

apps:
  gosh-fetch-qt:
    command: usr/bin/gosh-fetch-qt
    desktop: usr/share/applications/io.github.gosh.Fetch.desktop
    extensions: [kde-neon-6]
    plugs:
      - home
      - desktop
      - desktop-legacy
      - network
      - network-bind
      - removable-media
    slots:
      - dbus-daemon
    common-id: io.github.gosh.Fetch

slots:
  dbus-daemon:
    interface: dbus
    bus: session
    name: io.github.gosh.Fetch

parts:
  gosh-fetch:
    plugin: rust
    source: .
    build-packages:
      - cmake
      - ninja-build
      - qt6-base-dev
      - qt6-declarative-dev
      - libqt6opengl6-dev
      - libqt6svg6-dev
      - libssl-dev
      - libdbus-1-dev
    stage-packages:
      - libqt6core6
      - libqt6gui6
      - libqt6widgets6
      - libqt6qml6
      - libqt6quick6
      - libdbus-1-3
    rust-channel: stable
    rust-path:
      - crates/gosh-fetch-qt
    override-build: |
      craftctl default
      install -Dm644 ${CRAFT_PART_SRC}/gosh-fetch.desktop ${CRAFT_PART_INSTALL}/usr/share/applications/io.github.gosh.Fetch.desktop
      install -Dm644 ${CRAFT_PART_SRC}/io.github.gosh.Fetch.metainfo.xml ${CRAFT_PART_INSTALL}/usr/share/metainfo/io.github.gosh.Fetch.metainfo.xml
      install -Dm644 ${CRAFT_PART_SRC}/resources/io.github.gosh.Fetch.png ${CRAFT_PART_INSTALL}/usr/share/icons/hicolor/256x256/apps/io.github.gosh.Fetch.png
